<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: https://ogp.me/ns# fb: https://ogp.me/ns/fb#">
<html lang="en" class="js csstransforms3d">
<head>
  <meta charset="utf-8">
  <meta property="og:title" content="Graviton2" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="generator" content="Hugo 0.82.0" />
  <meta name="description" content="My AWS Workshop">
<meta name="author" content="Amazon AWS">

  <link rel="shortcut icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />
<link rel="icon" href="https://a0.awsstatic.com/libra-css/images/site/fav/favicon.ico" type="image/ico" />

  <title>Create RDS MySQL instance :: Graviton2</title>

  
  <link href="../../../css/nucleus.css" rel="stylesheet">
  <link href="../../../css/fontawesome-all.min.css" rel="stylesheet">
  <link href="../../../css/hybrid.css" rel="stylesheet">
  <link href="../../../css/featherlight.min.css" rel="stylesheet">
  <link href="../../../css/perfect-scrollbar.min.css" rel="stylesheet">
  <link href="../../../css/auto-complete.css" rel="stylesheet">
  <link href="../../../css/atom-one-dark-reasonable.css" rel="stylesheet">
  <link href="../../../css/theme.css" rel="stylesheet">
  <link href="../../../css/hugo-theme.css" rel="stylesheet">
  
  <link href="../../../css/theme-aws.css" rel="stylesheet">
  

  <script src="../../../js/jquery-3.5.1.min.js"></script>

  <style>
    :root #header + #content > #left > #rlblock_left{
        display:none !important;
    }
    
      :not(pre) > code + span.copy-to-clipboard {
          display: none;
      }
    
  </style>
  
</head>

<body class="" data-url="../../../en/amazonrds/02_upgrade/creatingcluster5.html">
  <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <div>
    <a href="../../../" title="Go home">
        <img style="vertical-align:middle" src="https://fonts.workshops.aws/logos/logo.png" height="70px" />
    </a>
</div>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../../js/lunr.min.js"></script>
<script type="text/javascript" src="../../../js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "\/en";
    
</script>
<script type="text/javascript" src="../../../js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/en/gettingstarted.html" title="Getting Started" class="dd-item 
        
        
        
        ">
      <a href="../../../en/gettingstarted.html">
          Getting Started
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/gettingstarted/prereqisites.html" title="Prerequisites" class="dd-item ">
        <a href="../../../en/gettingstarted/prereqisites.html">
        Prerequisites
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/amazoncontainers.html" title="Graviton2 and containers" class="dd-item 
        
        
        
        ">
      <a href="../../../en/amazoncontainers.html">
          Graviton2 and containers
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/creatingpipeline.html" title="Create container build pipeline" class="dd-item ">
        <a href="../../../en/amazoncontainers/creatingpipeline.html">
        Create container build pipeline
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/multiarchitecture.html" title="Multi-architecture application build" class="dd-item ">
        <a href="../../../en/amazoncontainers/multiarchitecture.html">
        Multi-architecture application build
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/amazoneks/ekscluster.html" title="AmazonEKS : Deploy multi-architecture EKS cluster" class="dd-item ">
        <a href="../../../en/amazoncontainers/amazoneks/ekscluster.html">
        AmazonEKS : Deploy multi-architecture EKS cluster
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/amazoneks/k8sapplication.html" title="AmazonEKS : Deploy a multi-architecture application" class="dd-item ">
        <a href="../../../en/amazoncontainers/amazoneks/k8sapplication.html">
        AmazonEKS : Deploy a multi-architecture application
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/amazoneks/aspnet.html" title="AmazonEKS : Running ASP.NET Core application on Graviton2" class="dd-item ">
        <a href="../../../en/amazoncontainers/amazoneks/aspnet.html">
        AmazonEKS : Running ASP.NET Core application on Graviton2
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/amazonecs/ecscluster.html" title="AmazonECS : Deploy Graviton2 ECS cluster" class="dd-item ">
        <a href="../../../en/amazoncontainers/amazonecs/ecscluster.html">
        AmazonECS : Deploy Graviton2 ECS cluster
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazoncontainers/cleanup.html" title="Graviton2 and Containers: Cleanup" class="dd-item ">
        <a href="../../../en/amazoncontainers/cleanup.html">
        Graviton2 and Containers: Cleanup
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/amazonrds.html" title="Graviton2 and databases" class="dd-item 
        parent
        
        
        ">
      <a href="../../../en/amazonrds.html">
          Graviton2 and databases
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/en/amazonrds/01_snapshot.html" title="Option 1: Restoring Graviton2 MySQL RDS database from x86 snapshot" class="dd-item 
        
        
        
        ">
      <a href="../../../en/amazonrds/01_snapshot.html">
          Option 1: Restoring Graviton2 MySQL RDS database from x86 snapshot
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/01_snapshot/creatingcluster8.html" title="Create RDS MySQL instance" class="dd-item ">
        <a href="../../../en/amazonrds/01_snapshot/creatingcluster8.html">
        Create RDS MySQL instance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/01_snapshot/loadingdata.html" title="Import Sample Database" class="dd-item ">
        <a href="../../../en/amazonrds/01_snapshot/loadingdata.html">
        Import Sample Database
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/01_snapshot/restoringrds.html" title="Restore your snapshot to Graviton2 instance" class="dd-item ">
        <a href="../../../en/amazonrds/01_snapshot/restoringrds.html">
        Restore your snapshot to Graviton2 instance
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/en/amazonrds/02_upgrade.html" title="Option 2 : MySQL RDS upgrade" class="dd-item 
        parent
        
        
        ">
      <a href="../../../en/amazonrds/02_upgrade.html">
          Option 2 : MySQL RDS upgrade
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/02_upgrade/creatingcluster5.html" title="Create RDS MySQL instance" class="dd-item active">
        <a href="../../../en/amazonrds/02_upgrade/creatingcluster5.html">
        Create RDS MySQL instance
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/02_upgrade/loadingdata.html" title="Import Sample Database" class="dd-item ">
        <a href="../../../en/amazonrds/02_upgrade/loadingdata.html">
        Import Sample Database
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/02_upgrade/upgradingmysq.html" title="Upgrading RDS MySQL database version" class="dd-item ">
        <a href="../../../en/amazonrds/02_upgrade/upgradingmysq.html">
        Upgrading RDS MySQL database version
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonrds/02_upgrade/modyfyinginstancetype.html" title="Changing instance to Graviton2" class="dd-item ">
        <a href="../../../en/amazonrds/02_upgrade/modyfyinginstancetype.html">
        Changing instance to Graviton2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/en/amazonemr.html" title="Graviton2 and big data" class="dd-item 
        
        
        
        ">
      <a href="../../../en/amazonemr.html">
          Graviton2 and big data
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/en/amazonemr/creatingcluster.html" title="Creating EMR Claster with Graviton2 instanaces" class="dd-item ">
        <a href="../../../en/amazonemr/creatingcluster.html">
        Creating EMR Claster with Graviton2 instanaces
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/en/amazonemr/cleanup.html" title="EMR Cleanup" class="dd-item ">
        <a href="../../../en/amazonemr/cleanup.html">
        EMR Cleanup
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/en/amazonrds/02_upgrade/creatingcluster5.html" selected>English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="es" value="/es/amazonrds/02_upgrade/creatingcluster5.html">Spanish</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
      </ul>
    </section>
    
    <section id="footer">
      <left>

    <a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2021, Amazon Web Services, Inc. or its affiliates. All rights reserved. 

</left>

    </section>
  </div>
</nav>





  <section id="body">
    <div id="overlay"></div>
    <div class="padding highlightable">
      
      <div>
        <div id="top-bar">
          
          
          <div id="breadcrumbs" itemscope="" itemtype="https://data-vocabulary.org/Breadcrumb">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fa fa-bars"></i>
              </a>
            </span>
            
            <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
            
            <span class="links">
              
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <a href='../../../en/'>Optimizing cost with AWS Graviton2 based services</a> > <a href='../../../en/amazonrds.html'>Graviton2 and databases</a> > <a href='../../../en/amazonrds/02_upgrade.html'>Option 2 : MySQL RDS upgrade</a> > Create RDS MySQL instance
          
          
          
          
          
          
          
          
            </span>
          </div>
          
          <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents"></nav>
    </div>
</div>

          
        </div>
      </div>
      

      
        <div id="body-inner">
          <h1>Create RDS MySQL instance</h1>
          
          

<p>Start by reviewing contents of the RDS MySQL 5 task definition in file labs/rds_graviton/rds_mysql_5.py</p>
<pre><code>    db_mysql5 = rds.DatabaseInstance(self, &quot;MySQL5&quot;,
                                         engine=rds.DatabaseInstanceEngine.mysql(
                                             version=rds.MysqlEngineVersion.VER_5_7_31
                                         ),
                                         instance_type=ec2.InstanceType(&quot;m5.4xlarge&quot;),
                                         vpc=vpc,
                                         multi_az=False,
                                         publicly_accessible=True,
                                         allocated_storage=100,
                                         storage_type=rds.StorageType.GP2,
                                         cloudwatch_logs_exports=[&quot;audit&quot;, &quot;error&quot;, &quot;general&quot;, &quot;slowquery&quot;],
                                         deletion_protection=False,
                                         enable_performance_insights=True,
                                         delete_automated_backups=True,
                                         backup_retention=core.Duration.days(1),
                                         parameter_group=rds.ParameterGroup.from_parameter_group_name(
                                             self, &quot;para-group-mysql&quot;,
                                             parameter_group_name=&quot;default.mysql5.7&quot;
                                         )
                                         )
</code></pre>
<p>Use of AWS Cloud Development Kit (CDK) greatly simplifies instantiation of AWS services such as Amazon RDS.
Above Python code fragment allows you instantiate single-AZ RDS MySQL 5 instance with 100GB GP2 Amazon EBS volume.
This instance is using m5.4xlarge instance type and will be accessible onlyfrom your Cloud9 environment via public IP.
RDS instance created though CDK will also have simple backup policy, logging, and RDS Performance Insights enabled.</p>
<ol>
<li>Initiate RDS MySQL 5 deployment using :</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cdk deploy GravitonID-rds-5
</code></pre></div><ol start="2">
<li>Before we connect to the MySQL instance, we need to set the username and password as environment variables in our Cloud9 session.
We will use CloudFormation output to find relevant variables.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">CREDS<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws secretsmanager get-secret-value --secret-id <span style="color:#e6db74">`</span>aws cloudformation describe-stacks --stack-name GravitonID-rds-5 --query <span style="color:#e6db74">&#34;Stacks[0].Outputs[0].OutputValue&#34;</span> --output text<span style="color:#e6db74">`</span> | jq -r <span style="color:#e6db74">&#39;.SecretString&#39;</span><span style="color:#66d9ef">)</span>
export DBID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws cloudformation describe-stacks --stack-name GravitonID-rds-5 --query <span style="color:#e6db74">&#34;Stacks[0].Outputs[1].OutputValue&#34;</span> --output text<span style="color:#66d9ef">)</span>
export DBUSER<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;`echo </span>$CREDS<span style="color:#e6db74"> | jq -r &#39;.username&#39;`&#34;</span>
export DBPASS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;`echo </span>$CREDS<span style="color:#e6db74"> | jq -r &#39;.password&#39;`&#34;</span>
export DBHOST<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;`echo </span>$CREDS<span style="color:#e6db74"> | jq -r &#39;.host&#39;`&#34;</span>
export DBPORT<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;`echo </span>$CREDS<span style="color:#e6db74"> | jq -r &#39;.port&#39;`&#34;</span>
echo $DBUSER
echo $DBPASS
echo $DBHOST
echo $DBPORT
echo $DBID
</code></pre></div><ol start="3">
<li>If you see an output of your username, password, host, and database port you have correctly set environment variables.
Proceed to the next chapter &ldquo;Import sample database&rdquo;.</li>
</ol>


<footer class=" footline" >
	
</footer>


        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../../en/amazonrds/02_upgrade.html" title="Option 2 : MySQL RDS upgrade"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../../en/amazonrds/02_upgrade/loadingdata.html" title="Import Sample Database" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../../js/clipboard.min.js"></script>
    <script src="../../../js/perfect-scrollbar.min.js"></script>
    <script src="../../../js/perfect-scrollbar.jquery.min.js"></script>
    <script src="../../../js/jquery.sticky.js"></script>
    <script src="../../../js/featherlight.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../../js/modernizr.custom-3.6.0.js"></script>
    <script src="../../../js/learn.js"></script>
    <script src="../../../js/hugo-learn.js"></script>
    
        
            <script src="../../../mermaid/mermaid.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    
  </body>
</html>

